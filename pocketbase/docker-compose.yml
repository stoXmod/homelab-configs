services:
  pocketbase:
    image: ghcr.io/muchobien/pocketbase:latest
    container_name: pocketbase
    restart: unless-stopped

    ports:
      # Using port 8055 - unique port to avoid conflicts
      - "8055:8090"

    environment:
      # Timezone
      - TZ=Asia/Colombo

    volumes:
      # Persistent data storage
      - ./pb_data:/pb_data
      
      # Optional: Custom hooks
      # - ./pb_hooks:/pb_hooks
      
      # Optional: Public files
      # - ./pb_public:/pb_public

    # Healthcheck
    healthcheck:
      test: wget --no-verbose --tries=1 --spider http://localhost:8090/api/health || exit 1
      interval: 30s
      timeout: 10s
      retries: 3
